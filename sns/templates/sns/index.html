{% extends 'sns/layout.html' %}

{% block title %}Index{% endblock %}

{% block header %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endblock %}

{% block content %}
    <form action="{% url 'index' %}" method="post">
    {% csrf_token %}
    <input type="hidden" name="mode" value="__search_form__">
    {{search_form}}
    <button>Search</button>
    </form>
    <hr>
    {% for item in contents %}
        <hr>
        <p class="message_public">

        <p class="message_content">{{item.content}}</p>
        {% if item.share_id > 0 %}
            <hr class="share_line">
            <p class="share_item_content">{{item.get_share}}</P>
        {% endif %}
        <p class="message_owner">
            <span class="message_counter">
                <a href="{% url 'share' item.id %}">
                <button>シェア</button></a>={{item.share_count}}
                <a href="{% url 'good' item.id %}">
                <button>いいね!</button></a>={{item.good_count}}
            </span>
            "{{item.owner}}" ({{item.pub_date}})
        </p>
    {% endfor %}
{% endblock %}
